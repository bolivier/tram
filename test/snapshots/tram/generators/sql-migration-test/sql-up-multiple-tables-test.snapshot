CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  email CITEXT NOT NULL UNIQUE,
  cool TEXT NOT NULL DEFAULT 'yes',
  updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
)

--;;

CREATE TRIGGER set_updated_at_on_users BEFORE
UPDATE
  ON users FOR EACH row EXECUTE FUNCTION update_updated_at_column()

--;;

CREATE TABLE accounts (
  id SERIAL PRIMARY KEY,
  cc_number TEXT NOT NULL,
  username TEXT NOT NULL UNIQUE,
  updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
)

--;;

CREATE TRIGGER set_updated_at_on_accounts BEFORE
UPDATE
  ON accounts FOR EACH row EXECUTE FUNCTION update_updated_at_column()

--;;

CREATE INDEX idx_accounts_username ON accounts(username)